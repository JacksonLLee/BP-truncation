# Modeling truncation in Brazilian Portuguese

By [Mike Pham](http://www.mikettpham.com/) and [Jackson Lee](http://jacksonllee.com/)

A full paper is currently being prepared,
which is a substantically expanded and revised version of the brief write-up
as a
[technical report (TR-2014-15, UChicago Computer Science)](https://newtraell.cs.uchicago.edu/research/publications/techreports/TR-2014-15).

## Contents

- ``main.py``: Python script for running the different truncation models over the data files in the ``data/`` folder

- ``data/``: directory for datasets

    * ``pt_br_orthofix*``: Brazilian Portuguese lexicon (two versions)
    * gold standard nouns with attested truncation (available in various formats for different annotations regarding binary foot model predictions)

- ``plots_for_words/``: directory for output plots for individual words for log(left-complete counts) and log(right-complete counts)

- ``results/``: directory for output files
  * error details in CSV
  * error distribution boxplot
  * evaluation
  * L- and R-complete counts for individual in LaTeX and PDF

- ``readme.md``: this readme file

## Requirements

Python 3.4 or above is required.
A Unix-based system (Linux or Mac) is assumed.

[NumPy](http://www.numpy.org/), [SciPy](http://www.scipy.org/),
[Pandas](http://pandas.pydata.org/),
and [Seaborn](https://stanford.edu/~mwaskom/software/seaborn/)
are required to run ``main.py``.
A great Python distribution that comes with these packages (and many others)
is [Anaconda](https://www.continuum.io/downloads).

*Optional* -- If the following commands are recognized in your path environment:

- ``Rscript``: ``plot_word.R`` (generated by ``main.py``) is run and the plots for
  individual words are saved in ``plots_for_words/``.
  
- ``xelatex``: ``individual_word_details.tex`` (generated by ``main.py``)
  is compiled and the resultant PDF is saved in ``results/``.

``Rscript`` comes from R, whereas ``xelatex`` comes from a LaTeX distribution
(such as ``texlive-full``).

## Download

Download this repository to your local drive by one of these two methods:

* Download and unzip https://github.com/JacksonLLee/BP-truncation/archive/master.zip

* Clone this repository:

    ```
    $ git clone https://github.com/JacksonLLee/BP-truncation.git
    $ cd BP-truncation
    ```

## Usage

``main.py`` can take optional arguments.
 The argument ``-h`` brings up the help page with details of these arguments:

```
$ python main.py -h
usage: main.py [-h] [-t] [-a] [-c] [-f] [-l] [-r]

Modeling truncation in Brazilian Portuguese, by Mike Pham and Jackson Lee

optional arguments:
  -h, --help           show this help message and exit
  -t, --tech           Include technical terms (default: False)
  -a, --a_as_TS        Treat -a in truncated form as part of truncated stem
                       (default: False)
  -c, --c_orthography  Use the c-orthography (less phonetic) instead of the
                       k-orthography (more phonetic) (default: False)
  -f, --freqtoken      Use token frequencies in lexicon (default: False)
  -l, --latex          Compile the output LaTeX file (default: False)
  -r, --run_r_script   Run R script (default: False)
```

The sample output files included in this repository are generated by this command:

```
$ python main.py -lr
```
 
This command has most of the default settings as described in the help page
shown above, i.e., by choosing "False" for most options except that
R code is run and LaTeX compilation is triggered.
If, for instance, you'd like to factor in token frequencies while still
running the R code and compiling the LaTeX file at the end,
you should run ``python main.py -flr``.
